# –ú–æ–¥—É–ª—å –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ RAG-—Å–∏—Å—Ç–µ–º—ã –í–æ–ø—Ä–æ—à–∞–ª—ã—á

Enterprise-grade —Å–∏—Å—Ç–µ–º–∞ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ RAG (Retrieval-Augmented Generation) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —á–∞—Ç-–±–æ—Ç–∞ –í–æ–ø—Ä–æ—à–∞–ª—ã—á.

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã RAG-—Å–∏—Å—Ç–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–π PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ LLM-–æ—Ü–µ–Ω–∫–∏.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **Single Source of Truth**: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π PostgreSQL (Docker)
- ‚úÖ **LLM-as-a-Judge**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç DeepSeek/Qwen –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏
- ‚úÖ **–¢—Ä–∏ —É—Ä–æ–≤–Ω—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: Retrieval, Generation, End-to-End
- ‚úÖ **–°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π Golden Standard**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Enterprise-grade**: –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, retry –ª–æ–≥–∏–∫–∞, –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
benchmarks/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ golden_dataset_synthetic.json  # –ó–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ rag_benchmark.py              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–µ–Ω—á–º–∞—Ä–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ llm_judge.py                  # LLM-—Å—É–¥—å—è (DeepSeek/Qwen)
‚îÇ   ‚îî‚îÄ‚îÄ embedding_generator.py        # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ reports/                          # –û—Ç—á—ë—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ rag_benchmark_*.json          # –ú–µ—Ç—Ä–∏–∫–∏ –≤ JSON
‚îÇ   ‚îî‚îÄ‚îÄ rag_benchmark_*.md            # –û—Ç—á—ë—Ç—ã –≤ Markdown
‚îÇ
‚îú‚îÄ‚îÄ dashboard.py                      # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ (Gradio)
‚îú‚îÄ‚îÄ generate_embeddings.py            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îú‚îÄ‚îÄ generate_dataset.py               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
‚îú‚îÄ‚îÄ run_comprehensive_benchmark.py     # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π
‚îî‚îÄ‚îÄ README.md                         # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. LLM-—Å—É–¥—å—è (`utils/llm_judge.py`)

–ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å DeepSeek API —Å retry –ª–æ–≥–∏–∫–æ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `generate_question_from_chunk()` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞ –∏ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- `evaluate_faithfulness()` - –û—Ü–µ–Ω–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ (1-5)
- `evaluate_answer_relevance()` - –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (1-5)
- `evaluate_e2e_quality()` - –û—Ü–µ–Ω–∫–∞ E2E –∫–∞—á–µ—Å—Ç–≤–∞ (1-5)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env):**
```bash
BENCHMARKS_JUDGE_API_KEY=your_api_key
BENCHMARKS_JUDGE_BASE_URL=https://api.deepseek.com
BENCHMARKS_JUDGE_MODEL=deepseek-chat
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (`generate_embeddings.py`)

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —á–∞–Ω–∫–æ–≤.

**–ó–∞–ø—É—Å–∫:**
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
python benchmarks/generate_embeddings.py --all

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è —á–∞–Ω–∫–æ–≤ (NEW!)
python benchmarks/generate_embeddings.py --chunks

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
python benchmarks/generate_embeddings.py --check-coverage
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ (`generate_dataset.py`)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–æ–ª–æ—Ç–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ —Å –ø–æ–º–æ—â—å—é LLM-—Å—É–¥—å–∏.

**–ó–∞–ø—É—Å–∫:**
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 50 –≤–æ–ø—Ä–æ—Å–æ–≤
python benchmarks/generate_dataset.py --num-samples 50

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
python benchmarks/generate_dataset.py --check-only
```

**–§–æ—Ä–º–∞—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞:**
```json
{
  "chunk_id": 123,
  "chunk_text": "...",
  "question": "–ö–∞–∫...",
  "ground_truth_answer": "...",
  "confluence_url": "https://..."
}
```

### 4. RAG –±–µ–Ω—á–º–∞—Ä–∫ (`models/rag_benchmark.py`)

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Ä–æ–≤–Ω–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –¢—Ä–∏ —É—Ä–æ–≤–Ω—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Tier 1: Retrieval Accuracy (–ü–æ–∏—Å–∫)

**–¶–µ–ª—å:** –ù–∞—Ö–æ–¥–∏—Ç –ª–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —á–∞–Ω–∫?

**–ú–µ—Ç—Ä–∏–∫–∏:**
- `HitRate@1/5/10` - –î–æ–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–æ–ø-K
- `MRR` (Mean Reciprocal Rank) - –°—Ä–µ–¥–Ω–∏–π –æ–±—Ä–∞—Ç–Ω—ã–π —Ä–∞–Ω–≥

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:**
```bash
python benchmarks/run_comprehensive_benchmark.py --tier 1
```

### Tier 2: Generation Quality (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è)

**–¶–µ–ª—å:** –ú–æ–∂–µ—Ç –ª–∏ LLM –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å —Å –∏–¥–µ–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º?

**–ú–µ—Ç—Ä–∏–∫–∏:**
- `avg_faithfulness` - –¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π)
- `avg_answer_relevance` - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:**
```bash
python benchmarks/run_comprehensive_benchmark.py --tier 2
```

### Tier 3: End-to-End (–ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω)

**–¶–µ–ª—å:** –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ —Ü–µ–ª–∏–∫–æ–º (–ü–æ–∏—Å–∫ + –ì–µ–Ω–µ—Ä–∞—Ü–∏—è)?

**–ú–µ—Ç—Ä–∏–∫–∏:**
- `avg_e2e_score` - –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (1-5)
- `avg_semantic_similarity` - –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:**
```bash
python benchmarks/run_comprehensive_benchmark.py --tier 3
```

## –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ü–∏–∫–ª

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd Submodules/voproshalych
uv sync

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ BENCHMARKS_JUDGE_API_KEY
```

### –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose up -d --build

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è —á–∞–Ω–∫–æ–≤
python benchmarks/generate_embeddings.py --chunks

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
python benchmarks/generate_embeddings.py --check-coverage
```

### –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (50 –≤–æ–ø—Ä–æ—Å–æ–≤)
python benchmarks/generate_dataset.py --num-samples 50
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —É—Ä–æ–≤–Ω–∏
python benchmarks/run_comprehensive_benchmark.py --tier all --limit 50

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏
python benchmarks/run_comprehensive_benchmark.py --tier 1
python benchmarks/run_comprehensive_benchmark.py --tier 2
python benchmarks/run_comprehensive_benchmark.py --tier 3
```

### –®–∞–≥ 5: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç—á—ë—Ç—ã –≤ Markdown
cat benchmarks/reports/rag_benchmark_*.md

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥
python benchmarks/dashboard.py
# –î–∞—à–±–æ—Ä–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:7860
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á—ë—Ç–æ–≤

–û—Ç—á—ë—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `benchmarks/reports/`:

```
benchmarks/reports/
‚îú‚îÄ‚îÄ rag_benchmark_20260215_120000.json      # –ú–µ—Ç—Ä–∏–∫–∏ JSON
‚îú‚îÄ‚îÄ rag_benchmark_20260215_120000.md        # –û—Ç—á—ë—Ç Markdown
‚îú‚îÄ‚îÄ rag_benchmark_20260215_130000.json
‚îú‚îÄ‚îÄ rag_benchmark_20260215_130000.md
‚îî‚îÄ‚îÄ ...
```

**–§–æ—Ä–º–∞—Ç –æ—Ç—á—ë—Ç–∞ JSON:**
```json
{
  "tier_1": {
    "tier": 1,
    "total_queries": 50,
    "hit_rate@1": 0.82,
    "hit_rate@5": 0.91,
    "hit_rate@10": 0.96,
    "mrr": 0.85
  },
  "tier_2": {
    "tier": 2,
    "total_queries": 50,
    "avg_faithfulness": 4.2,
    "avg_answer_relevance": 4.3
  },
  "tier_3": {
    "tier": 3,
    "total_queries": 50,
    "avg_e2e_score": 3.8,
    "avg_semantic_similarity": 0.75
  }
}
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

### –ó–∞–ø—É—Å–∫

```bash
# –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Submodules/voproshalych/benchmarks
python dashboard.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
python run_dashboard.py
```

–î–∞—à–±–æ—Ä–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:7860

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

–î–∞—à–±–æ—Ä–¥ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏:

#### Tab 1: –ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫

–ö–∞—Ä—Ç–æ—á–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π:
- Tier 1: HitRate@1/5/10, MRR
- Tier 2: Faithfulness, Answer Relevance
- Tier 3: E2E Score, Semantic Similarity

#### Tab 2: –ò—Å—Ç–æ—Ä–∏—è

–ì—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤–æ –≤—Ä–µ–º–µ–Ω–∏:
- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –±–µ–Ω—á–º–∞—Ä–∫–∞ (Tier 1/2/3)
- –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤

#### Tab 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ –Ω–∞ –æ–¥–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ:
- –í—ã–±–æ—Ä –º–µ—Ç—Ä–∏–∫–∏
- –ù–∞–ª–æ–∂–µ–Ω–∏–µ –ª–∏–Ω–∏–π Tier 1/2/3

#### Tab 4: –í—Å–µ –∑–∞–ø—É—Å–∫–∏

–¢–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–∞–ø—É—Å–∫–∞–º–∏ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤:
- Timestamp
- Tier 1 MRR
- Tier 2 Faithfulness
- Tier 3 E2E

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- gradio (–¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
- pandas (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Gradio (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞)
pip install gradio

# –ò–ª–∏ —á–µ—Ä–µ–∑ uv
uv add --dev gradio
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | Tier 1 | Tier 2 | Tier 3 | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|--------|--------|--------|-----------|
| HitRate@1 | ‚â• 0.80 | - | - | üî¥ –í—ã—Å–æ–∫–∏–π |
| HitRate@5 | ‚â• 0.90 | - | - | üî¥ –í—ã—Å–æ–∫–∏–π |
| HitRate@10 | ‚â• 0.95 | - | - | üü° –°—Ä–µ–¥–Ω–∏–π |
| MRR | ‚â• 0.80 | - | - | üî¥ –í—ã—Å–æ–∫–∏–π |
| Faithfulness | - | ‚â• 4.0 | - | üî¥ –í—ã—Å–æ–∫–∏–π |
| Answer Relevance | - | ‚â• 4.0 | - | üî¥ –í—ã—Å–æ–∫–∏–π |
| E2E Score | - | - | ‚â• 3.5 | üî¥ –í—ã—Å–æ–∫–∏–π |
| Semantic Similarity | - | - | ‚â• 0.70 | üü° –°—Ä–µ–¥–Ω–∏–π |

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

| –ú–µ—Ç—Ä–∏–∫–∞ | –û—Ç–ª–∏—á–Ω–æ | –•–æ—Ä–æ—à–æ | –°—Ä–µ–¥–Ω–µ | –ü–ª–æ—Ö–æ |
|---------|--------|--------|--------|--------|
| **Tier 1** | | | | |
| HitRate@1 | ‚â•80% | ‚â•60% | ‚â•40% | <40% |
| HitRate@5 | ‚â•90% | ‚â•70% | ‚â•50% | <50% |
| HitRate@10 | ‚â•95% | ‚â•80% | ‚â•60% | <60% |
| MRR | ‚â•0.8 | ‚â•0.6 | ‚â•0.4 | <0.4 |
| **Tier 2** | | | | |
| Faithfulness | ‚â•5.0 | ‚â•4.0 | ‚â•3.0 | <3.0 |
| Answer Relevance | ‚â•5.0 | ‚â•4.0 | ‚â•3.0 | <3.0 |
| **Tier 3** | | | | |
| E2E Score | ‚â•4.0 | ‚â•3.0 | ‚â•2.0 | <2.0 |
| Semantic Similarity | ‚â•0.8 | ‚â•0.6 | ‚â•0.4 | <0.4 |

### –ü–æ–∫—Ä—ã—Ç–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|---------|------|--------|
| QA —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ | ~5% | ‚â• 80% | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ |
| –ß–∞–Ω–∫–∏ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ | ~0% | ‚â• 80% | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ |

## CLI –∫–æ–º–∞–Ω–¥—ã

### generate_embeddings.py

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
python benchmarks/generate_embeddings.py --all
python benchmarks/generate_embeddings.py --score 5
python benchmarks/generate_embeddings.py --score 1

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è —á–∞–Ω–∫–æ–≤
python benchmarks/generate_embeddings.py --chunks

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
python benchmarks/generate_embeddings.py --check-coverage

# –ü–µ—Ä–µ–∑–∞–ø–∏—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
python benchmarks/generate_embeddings.py --all --overwrite
python benchmarks/generate_embeddings.py --chunks --overwrite
```

### generate_dataset.py

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞
python benchmarks/generate_dataset.py --num-samples 50

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
python benchmarks/generate_dataset.py --check-only

# –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å
python benchmarks/generate_dataset.py --num-samples 100 \
    --output benchmarks/data/my_dataset.json
```

### run_comprehensive_benchmark.py

```bash
# –í—Å–µ —É—Ä–æ–≤–Ω–∏
python benchmarks/run_comprehensive_benchmark.py --tier all

# –û—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏
python benchmarks/run_comprehensive_benchmark.py --tier 1
python benchmarks/run_comprehensive_benchmark.py --tier 2
python benchmarks/run_comprehensive_benchmark.py --tier 3

# –° –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
python benchmarks/run_comprehensive_benchmark.py --tier all --limit 10

# –ö–∞—Å—Ç–æ–º–Ω—ã–π Top-K –¥–ª—è Tier 1
python benchmarks/run_comprehensive_benchmark.py --tier 1 --top-k 20

# –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –∫ –¥–∞—Ç–∞—Å–µ—Ç—É
python benchmarks/run_comprehensive_benchmark.py --tier all \
    --dataset benchmarks/data/my_dataset.json

# –ö–∞—Å—Ç–æ–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
python benchmarks/run_comprehensive_benchmark.py --tier all \
    --output-dir benchmarks/my_reports

# –ü—Ä–æ–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫
python benchmarks/run_comprehensive_benchmark.py --tier all --skip-checks
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PostgreSQL (Docker)‚îÇ
‚îÇ  - QuestionAnswer   ‚îÇ
‚îÇ  - Chunk           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ generate_embeddings‚îÇ
‚îÇ   (QA + Chunks)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ generate_dataset    ‚îÇ
‚îÇ  (LLM Judge)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ rag_benchmark.py    ‚îÇ
‚îÇ  - Tier 1: Retrieval‚îÇ
‚îÇ  - Tier 2: Generation‚îÇ
‚îÇ  - Tier 3: E2E     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Reports (JSON/MD)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Dashboard.py      ‚îÇ
‚îÇ   (Gradio)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- `sentence-transformers` - –≠–º–±–µ–¥–¥–∏–Ω–≥–∏
- `sqlalchemy` - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `openai` - LLM API –∫–ª–∏–µ–Ω—Ç
- `tenacity` - Retry –ª–æ–≥–∏–∫–∞

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- `gradio` - –î–∞—à–±–æ—Ä–¥

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: BENCHMARKS_JUDGE_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export BENCHMARKS_JUDGE_API_KEY=your_api_key

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env
echo "BENCHMARKS_JUDGE_API_KEY=your_api_key" >> .env
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç —á–∞–Ω–∫–æ–≤ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–ª—è —á–∞–Ω–∫–æ–≤
python benchmarks/generate_embeddings.py --chunks

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
python benchmarks/generate_embeddings.py --check-coverage
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞—Ç–∞—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥–∞—Ç–∞—Å–µ—Ç
python benchmarks/generate_dataset.py --num-samples 50
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DeepSeek

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –∏ URL
import os
print(f"API Key: {os.getenv('BENCHMARKS_JUDGE_API_KEY')}")
print(
    f"Base URL: {os.getenv('BENCHMARKS_JUDGE_BASE_URL', 'https://api.deepseek.com')}"
)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞—à–±–æ—Ä–¥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Gradio
pip install gradio

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã
cat benchmarks/reports/rag_benchmark_*.md
```

## –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è

- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ–∏—Å–∫–∞
- ‚è≥ –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM-—Å—É–¥—å–∏
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- ‚è≥ –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ 90%+

### –í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ

- ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- ‚è≥ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ PDF
- ‚è≥ –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ü–µ–Ω–æ–∫
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è DeepSeek API:** https://platform.deepseek.com/docs
- **Sentence Transformers:** https://www.sbert.net/
- **Gradio:** https://gradio.app/
- **Testing Guide:** `../docs/main/TESTING_GUIDE.md`

---

**–í–µ—Ä—Å–∏—è:** 3.0 (Enterprise Grade)
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-02-15
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ
